/* === БАЗА (цвета и каркас) === */
:root{
  --bg:#0f1218; --panel:#161b22; --border:#262c36;
  --text:#e6edf3; --muted:#9da7b3; --brand:#7aa2f7;
  --easy:#31c48d; --medium:#f59e0b; --hard:#ef4444; --exam:#8b5cf6;
}

*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--bg);color:var(--text);
  font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Helvetica Neue,Arial,sans-serif;}
a{color:var(--brand);text-decoration:none} a:hover{text-decoration:underline}
.container{max-width:960px;margin:0 auto;padding:1rem}
.topbar{background:var(--panel);border-bottom:1px solid var(--border)}
.topbar .container{display:flex;align-items:center;justify-content:space-between}
.brand{font-weight:700}
.nav-links a{margin-left:1rem}

.card{background:var(--panel);border:1px solid var(--border);border-radius:14px;padding:1rem;margin:1rem 0}
.footer{padding:2rem 1rem 3rem}
.muted{color:var(--muted)}
.list{list-style:none;padding:0;margin:0}
.bullets{list-style:disc;padding-left:1.25rem}
.btn-ghost{padding:.35rem .6rem;border:1px solid var(--border);background:transparent;color:var(--text);border-radius:10px}
.btn-ghost:hover{border-color:var(--brand)}

.badge{display:inline-block;padding:.1rem .45rem;border-radius:999px;font-size:.75rem;border:1px solid var(--border)}
.tag{display:inline-block;padding:.15rem .5rem;border-radius:999px;font-size:.75rem;margin-right:.35rem;border:1px solid var(--border)}
.tag-easy{background:color-mix(in srgb, var(--easy) 20%, transparent)}
.tag-medium{background:color-mix(in srgb, var(--medium) 20%, transparent)}
.tag-hard{background:color-mix(in srgb, var(--hard) 20%, transparent)}
.tag-exam{background:color-mix(in srgb, var(--exam) 20%, transparent)}

/* === Markdown-вид для страницы ссылок === */
.markdown h2,.markdown h3,.markdown h4{
  margin:1.2rem 0 .5rem; padding-bottom:.15rem; border-bottom:1px dashed var(--border);
}
.markdown hr{border:0;border-top:1px solid var(--border);margin:.9rem 0;opacity:.7}
.markdown ul{margin:.4rem 0 .8rem 1.25rem}
.markdown li{margin:.25rem 0}

/* === КАЛЕНДАРЬ: только НЕДЕЛЯ === */
/* верхняя панель с стрелками и диапазоном дат */
.calendar-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:.5rem}

/* контейнер календаря: даём горизонтальный скролл на узких экранах */
.calendar-grid{display:block;overflow-x:auto;padding-bottom:.25rem}

/* шапка дней недели: дата и ДOW */
.week-header{
  display:grid; grid-template-columns:repeat(7,minmax(140px,1fr));
  gap:.6rem; min-width:980px;
}
.wh-cell{ text-align:center; color:var(--muted); font-weight:600; padding:.25rem 0 .4rem; }
.wh-cell .wh-date{ color:var(--text); font-weight:700; margin-right:.25rem; }
.wh-cell .wh-dow{ color:var(--muted); }

/* сетка дней (7 колонок) */
.week-grid{
  display:grid; grid-template-columns:repeat(7,minmax(140px,1fr));
  gap:.6rem; min-width:980px;
}
.day-col{
  background:var(--panel); border:1px solid var(--border); border-radius:12px;
  min-height:360px; display:flex; flex-direction:column;
}
.day-col.today{ outline:2px solid var(--brand); }
.day-body{ position:relative; flex:1; padding:.5rem; overflow:auto; }

/* список событий в дне */
.events{ display:flex; flex-direction:column; gap:.35rem; }

/* строка-событие: показываем только предмет; крупный размер; троеточие при переполнении */
.ev-subj{
  position:relative; display:inline-flex; align-items:center; gap:.45rem;
  max-width:100%; font-size:1rem; line-height:1.15;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis; cursor:default;
}

/* цветная точка сложности */
.ev-subj .dot{ width:.68rem; height:.68rem; border-radius:50%; border:1px solid var(--border); }
.dot.easy{background:var(--easy)} .dot.medium{background:var(--medium)}
.dot.hard{background:var(--hard)} .dot.exam{background:var(--exam)}

/* крупный бейдж-подсказка (полное название) */
.ev-subj[data-tip]:hover::after{
  content:attr(data-tip); position:absolute; left:0; bottom:125%;
  background:var(--panel); color:var(--text); border:1px solid var(--border);
  border-radius:.9rem; padding:.6rem .8rem; font-size:1rem; white-space:nowrap; z-index:20;
  box-shadow:0 12px 28px rgba(0,0,0,.4);
}
/* --- компактная неделя без горизонтального скролла на десктопе --- */
.calendar-grid{ display:block; overflow-x:visible; padding-bottom:.25rem; }

/* заголовки дней и колонки — ровно 7 равных долей */
.week-header, .week-grid{
  display:grid;
  grid-template-columns: repeat(7, 1fr);
  gap:.6rem;
  min-width: 0;   /* важно, чтобы ничего не расширяло контейнер */
}

/* контроль высоты столбца недели через переменную */
:root{ --day-h: 300px; }              /* базовая высота */
@media (max-height: 820px){ :root{ --day-h: 260px; } }
@media (max-height: 680px){ :root{ --day-h: 220px; } }

.day-col{
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:12px;
  height: var(--day-h);               /* фиксируем высоту */
  min-height: 0;                      /* отменяем прежний min-height */
  display:flex; flex-direction:column;
}
.day-col.today{ outline:2px solid var(--brand); }

.day-body{
  position:relative;
  flex:1;
  padding:.5rem;
  overflow:auto;                      /* если задач много — скролл ВНУТРИ дня */
}

/* список событий и строки — как раньше */
.events{ display:flex; flex-direction:column; gap:.35rem; }
.ev-subj{
  position:relative; display:inline-flex; align-items:center; gap:.45rem;
  max-width:100%; font-size:1rem; line-height:1.15;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis; cursor:default;
}
.ev-subj .dot{ width:.68rem; height:.68rem; border-radius:50%; border:1px solid var(--border); }
.dot.easy{background:var(--easy)} .dot.medium{background:var(--medium)}
.dot.hard{background:var(--hard)} .dot.exam{background:var(--exam)}
.ev-subj[data-tip]:hover::after{
  content:attr(data-tip); position:absolute; left:0; bottom:125%;
  background:var(--panel); color:var(--text); border:1px solid var(--border);
  border-radius:.9rem; padding:.6rem .8rem; font-size:1rem; white-space:nowrap; z-index:20;
  box-shadow:0 12px 28px rgba(0,0,0,.4);
}

/* на очень узких экранах разрешаем горизонтальный скролл недели */
@media (max-width: 820px){
  .calendar-grid{ overflow-x:auto; }
  .week-header, .week-grid{
    grid-template-columns: repeat(7, minmax(120px, 1fr));
    min-width: 840px; /* чтобы не мельчилось; скролл горизонтальный появится тут */
  }
}


/* мобилки */
@media (max-width:720px){
  .day-col{ min-height:300px; }
}
