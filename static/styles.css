/* === БАЗА (цвета и каркас) === */
:root{
  --bg:#0f1218; --panel:#161b22; --border:#262c36;
  --text:#e6edf3; --muted:#9da7b3; --brand:#7aa2f7;
  --easy:#31c48d; --medium:#f59e0b; --hard:#ef4444; --exam:#8b5cf6;
}
/* высота столбца недели */
:root{ --day-h: 300px; }
@media (max-height: 820px){ :root{ --day-h: 260px; } }
@media (max-height: 680px){ :root{ --day-h: 220px; } }

*{box-sizing:border-box}
html,body{
  margin:0; padding:0; background:var(--bg); color:var(--text);
  font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Helvetica Neue,Arial,sans-serif;
}
a{color:var(--brand);text-decoration:none}
a:hover{text-decoration:underline}
.container{max-width:960px;margin:0 auto;padding:1rem}
.topbar{background:var(--panel);border-bottom:1px solid var(--border)}
.topbar .container{display:flex;align-items:center;justify-content:space-between;padding-bottom:0}
.brand{font-weight:700;display:inline-block;padding:1rem 0;position:relative}
.nav-links{display:flex;align-items:center}
.nav-links a{margin-left:1rem;display:inline-block;padding:1rem 0;position:relative}

/* выделение активной вкладки */
.brand[aria-current="page"],
.nav-links a[aria-current="page"]{
  color: var(--text);
  font-weight: 600;
}

.brand[aria-current="page"]::after,
.nav-links a[aria-current="page"]::after{
  content: "";
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 2px;
  background: var(--brand);
  border-radius: 2px 2px 0 0;
}

.card{background:var(--panel);border:1px solid var(--border);border-radius:14px;padding:1rem;margin:1rem 0}
.footer{padding:2rem 1rem 3rem}
.muted{color:var(--muted)}
.list{list-style:none;padding:0;margin:0}
.bullets{list-style:disc;padding-left:1.25rem}
.btn-ghost{padding:.35rem .6rem;border:1px solid var(--border);background:transparent;color:var(--text);border-radius:10px}
.btn-ghost:hover{border-color:var(--brand)}

.badge{display:inline-block;padding:.1rem .45rem;border-radius:999px;font-size:.75rem;border:1px solid var(--border)}
.tag{display:inline-block;padding:.15rem .5rem;border-radius:999px;font-size:.75rem;margin-right:.35rem;border:1px solid var(--border)}
.tag-easy{background:color-mix(in srgb, var(--easy) 20%, transparent)}
.tag-medium{background:color-mix(in srgb, var(--medium) 20%, transparent)}
.tag-hard{background:color-mix(in srgb, var(--hard) 20%, transparent)}
.tag-exam{background:color-mix(in srgb, var(--exam) 20%, transparent)}

/* === Markdown-страница ссылок === */
.markdown h2,.markdown h3,.markdown h4{ margin:1.2rem 0 .5rem; padding-bottom:.15rem; border-bottom:1px dashed var(--border); }
.markdown hr{border:0;border-top:1px solid var(--border);margin:.9rem 0;opacity:.7}
.markdown ul{margin:.4rem 0 .8rem 1.25rem}
.markdown li{margin:.25rem 0}

/* === КАЛЕНДАРЬ: неделя === */
.calendar-head{
  display:grid; grid-template-columns:1fr auto 1fr; align-items:center; margin-bottom:.5rem;
}
.calendar-head #prev-month{ justify-self:start; }
.calendar-head #next-month{ justify-self:end; }
.calendar-head h2#month-label{
  margin:0; font-weight:800; font-size:1.6rem; letter-spacing:.2px; text-align:center;
}

.calendar-grid{ display:block; overflow-x:visible; padding-bottom:.25rem; }

.week-header, .week-grid{
  display:grid; grid-template-columns:repeat(7, 1fr); gap:.6rem; min-width:0;
}
.wh-cell{ text-align:center; color:var(--muted); font-weight:600; padding:.25rem 0 .4rem; }
.wh-cell .wh-date{ color:var(--text); font-weight:700; margin-right:.25rem; }
.wh-cell .wh-dow{ color:var(--muted); }

.day-col{
  background:var(--panel); border:1px solid var(--border); border-radius:12px;
  height:var(--day-h); min-height:0; display:flex; flex-direction:column;
}
.day-col.today{ outline:2px solid var(--brand); }
.day-body{ position:relative; flex:1; padding:.5rem; overflow:auto; }

.events{ display:flex; flex-direction:column; gap:.45rem; }

/* событие: колонка из трёх строк (предмет, сокращённое название, ссылка) + цветная полоса слева */
/* цветная вертикальная линия СЛЕВА — на всю высоту события */
.ev-subj{
  position: relative;
  padding-left: .85rem;       /* чуть больше отступ под полосу */
}

.ev-subj::before{
  content: "";
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;                  /* растянуть от верха до низа */
  width: 3px;
  border-radius: 2px;
  background: var(--muted);   /* дефолтный цвет */
  transform: none;            /* важно: убираем translateY */
}

/* цвета по сложности */
.ev-subj.easy::before{   background: var(--easy); }
.ev-subj.medium::before{ background: var(--medium); }
.ev-subj.hard::before{   background: var(--hard); }
.ev-subj.exam::before{   background: var(--exam); }

.ev-name{ font-size:1rem; line-height:1.15; font-weight:600; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.ev-desc{ font-size:.9rem; color:var(--muted); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.ev-link{ font-size:.85rem; text-decoration:none; border-bottom:1px dashed var(--brand); }
.ev-link:hover{ border-bottom-style:solid; }
.ev-link.disabled{ color:var(--muted); border-bottom:1px dashed transparent; pointer-events:none; }

/* компактная рамка-ссылка */
.cta{
  display:inline-block;
  padding:.35rem .6rem;
  border:1px solid var(--border);
  border-radius:10px;
  color:var(--brand);
  text-decoration:none;
  line-height:1;
  transition: border-color .15s ease, background-color .15s ease, box-shadow .15s ease;
}
.cta:hover{
  border-color: var(--brand);
  background: color-mix(in srgb, var(--brand) 10%, transparent);
  text-decoration:none;
}
.cta:focus-visible{
  outline:none;
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--brand) 25%, transparent);
}
.cta:active{
  background: color-mix(in srgb, var(--brand) 16%, transparent);
}


/* === ГЛАВНАЯ СТРАНИЦА: Ближайшие дедлайны === */
#upcoming-list li{
  padding: 0.75rem 0;
  margin: 0.5rem 0;
  border-bottom: 1px solid color-mix(in srgb, var(--border) 50%, transparent);
  font-size: 1rem;
  line-height: 1.6;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

#upcoming-list li:last-child{
  border-bottom: none;
}

/* цветная точка слева от дедлайна */
.dot{
  display: inline-block;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
  background: var(--muted);
}
.dot.easy{ background: var(--easy); }
.dot.medium{ background: var(--medium); }
.dot.hard{ background: var(--hard); }
.dot.exam{ background: var(--exam); }

/* контейнер текста дедлайна */
.deadline-content{
  flex: 1;
  display: inline;
}

/* увеличение бейджа предмета */
#upcoming-list .badge{
  font-size: 0.8rem;
  padding: 0.2rem 0.5rem;
}

/* контейнер для кнопки - выравнивание и отступ */
.actions{
  margin-top: 1.25rem;
  padding-top: 0.5rem;
  display: flex;
  justify-content: flex-start;
}

/* увеличение кнопки календаря */
.actions .cta{
  padding: 0.5rem 1rem;
  font-size: 0.95rem;
  font-weight: 500;
}

/* мобилки: горизонтальный скролл недели */
@media (max-width: 820px){
  .calendar-grid{ overflow-x:auto; }
  .week-header, .week-grid{ grid-template-columns:repeat(7, minmax(120px, 1fr)); min-width:840px; }
  .day-col{ height:260px; }
}
