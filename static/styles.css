/* === БАЗА (цвета и каркас) === */
:root{
  --bg:#0f1218; --panel:#161b22; --border:#262c36;
  --text:#e6edf3; --muted:#9da7b3; --brand:#7aa2f7;
  --easy:#31c48d; --medium:#f59e0b; --hard:#ef4444; --exam:#8b5cf6;
}
/* высота столбца недели (регулируется по высоте экрана) */
:root{ --day-h: 300px; }
@media (max-height: 820px){ :root{ --day-h: 260px; } }
@media (max-height: 680px){ :root{ --day-h: 220px; } }

*{box-sizing:border-box}
html,body{
  margin:0; padding:0; background:var(--bg); color:var(--text);
  font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Helvetica Neue,Arial,sans-serif;
}
a{color:var(--brand);text-decoration:none}
a:hover{text-decoration:underline}
.container{max-width:960px;margin:0 auto;padding:1rem}
.topbar{background:var(--panel);border-bottom:1px solid var(--border)}
.topbar .container{display:flex;align-items:center;justify-content:space-between}
.brand{font-weight:700}
.nav-links a{margin-left:1rem}

.card{background:var(--panel);border:1px solid var(--border);border-radius:14px;padding:1rem;margin:1rem 0}
.footer{padding:2rem 1rem 3rem}
.muted{color:var(--muted)}
.list{list-style:none;padding:0;margin:0}
.bullets{list-style:disc;padding-left:1.25rem}
.btn-ghost{padding:.35rem .6rem;border:1px solid var(--border);background:transparent;color:var(--text);border-radius:10px}
.btn-ghost:hover{border-color:var(--brand)}

.badge{display:inline-block;padding:.1rem .45rem;border-radius:999px;font-size:.75rem;border:1px solid var(--border)}
.tag{display:inline-block;padding:.15rem .5rem;border-radius:999px;font-size:.75rem;margin-right:.35rem;border:1px solid var(--border)}
.tag-easy{background:color-mix(in srgb, var(--easy) 20%, transparent)}
.tag-medium{background:color-mix(in srgb, var(--medium) 20%, transparent)}
.tag-hard{background:color-mix(in srgb, var(--hard) 20%, transparent)}
.tag-exam{background:color-mix(in srgb, var(--exam) 20%, transparent)}

/* === Markdown-вид для страницы ссылок === */
.markdown h2,.markdown h3,.markdown h4{
  margin:1.2rem 0 .5rem; padding-bottom:.15rem; border-bottom:1px dashed var(--border);
}
.markdown hr{border:0;border-top:1px solid var(--border);margin:.9rem 0;opacity:.7}
.markdown ul{margin:.4rem 0 .8rem 1.25rem}
.markdown li{margin:.25rem 0}

/* === КАЛЕНДАРЬ (только неделя) === */
/* шапка: стрелки по краям, диапазон строго по центру */
.calendar-head{
  display:grid;
  grid-template-columns: 1fr auto 1fr;
  align-items:center;
  margin-bottom:.5rem;
}
.calendar-head #prev-month{ justify-self:start; }
.calendar-head #next-month{ justify-self:end; }
.calendar-head h2#month-label{
  margin:0; font-weight:800; font-size:1.6rem; letter-spacing:.2px; text-align:center;
}

/* контейнер календаря */
.calendar-grid{ display:block; overflow-x:visible; padding-bottom:.25rem; }

/* шапка дней недели и сетка дней — 7 равных колонок */
.week-header, .week-grid{
  display:grid;
  grid-template-columns: repeat(7, 1fr);
  gap:.6rem;
  min-width:0;
}
.wh-cell{ text-align:center; color:var(--muted); font-weight:600; padding:.25rem 0 .4rem; }
.wh-cell .wh-date{ color:var(--text); font-weight:700; margin-right:.25rem; }
.wh-cell .wh-dow{ color:var(--muted); }

.day-col{
  background:var(--panel); border:1px solid var(--border); border-radius:12px;
  height: var(--day-h); min-height:0;
  display:flex; flex-direction:column;
}
.day-col.today{ outline:2px solid var(--brand); }
.day-body{ position:relative; flex:1; padding:.5rem; overflow:auto; }

/* список событий в дне */
.events{ display:flex; flex-direction:column; gap:.35rem; }

/* строка события: только предмет; цветная вертикальная линия СЛЕВА */
.ev-subj{
  position:relative;
  display:inline-flex; align-items:center;
  max-width:100%;
  font-size:1rem; line-height:1.15;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
  cursor:default;
  padding-left:.75rem;   /* место под линию слева */
}
.ev-subj::before{
  content:"";
  position:absolute; left:0; top:50%;
  transform:translateY(-50%);
  width:3px; height:70%; border-radius:2px;
  background:var(--muted);
}
.ev-subj.easy::before{   background: var(--easy); }
.ev-subj.medium::before{ background: var(--medium); }
.ev-subj.hard::before{   background: var(--hard); }
.ev-subj.exam::before{   background: var(--exam); }
/* если где-то осталась старая точка — прячем */
.ev-subj .dot{ display:none !important; }

/* большой тултип-карточка с названием работы */
.ev-subj[data-tip]:hover::after{
  content:attr(data-tip);
  position:absolute; left:0; bottom:calc(100% + 12px);
  background:var(--panel); color:var(--text);
  border:1px solid var(--border); border-radius:14px;
  padding:.9rem 1.1rem; font-size:1.05rem; line-height:1.25;
  max-width:360px; white-space:normal; z-index:40;
  box-shadow:0 18px 40px rgba(0,0,0,.5);
}
.ev-subj[data-tip]:hover::before{
  /* маленький хвостик под карточкой */
  content:""; position:absolute; left:12px; bottom:calc(100% + 2px);
  border:8px solid transparent; border-top-color:var(--panel);
  filter: drop-shadow(0 -1px 0 var(--border));
}

/* мобилки: горизонтальный скролл недели, чтобы не сжимать колонки до пыли */
@media (max-width: 820px){
  .calendar-grid{ overflow-x:auto; }
  .week-header, .week-grid{
    grid-template-columns: repeat(7, minmax(120px, 1fr));
    min-width: 840px;
  }
  .day-col{ height: 260px; }
}
